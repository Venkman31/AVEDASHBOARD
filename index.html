<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVE Dashboard - Sept 2025</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Chart.js for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Load Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Apply Inter font */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* gray-100 */
        }
        /* Custom styles for Chart.js tooltips */
        .chartjs-tooltip {
            font-family: 'Inter', sans-serif;
        }
        /* Hide elements when printing */
        @media print {
            .print-hidden {
                display: none;
            }
            body {
                background-color: #ffffff;
            }
            .bg-white {
                box-shadow: none;
                border: 1px solid #e5e7eb;
            }
        }
    </style>
    <script>
        // Set Tailwind theme colors to match AVE branding
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ave-teal': {
                            DEFAULT: '#0d9488', // teal-600
                            light: '#99f6e4',   // teal-200
                            dark: '#115e59'    // teal-800
                        },
                        'ave-orange': {
                            DEFAULT: '#f97316' // orange-500
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100">

    <!-- Header -->
    <div class="bg-white shadow-sm mb-6 print-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5 flex justify-between items-center">
            
            <!-- Left Spacer -->
            <div class="w-1/4">
                <!-- Intentionally blank to allow for centering -->
            </div>

            <!-- Centered Header Text -->
            <div class="w-1/2 text-center">
                <h1 class="text-3xl font-bold text-ave-teal-dark">Added Value Enterprises</h1>
                <p class="text-ave-teal text-lg">September 2025 Board Report Dashboard</p>
            </div>

            <!-- Download Button -->
            <div class="w-1/4 flex justify-end">
                <button 
                    onclick="window.print()"
                    class="bg-ave-teal text-white font-semibold py-2 px-4 rounded-lg shadow hover:bg-ave-teal-dark transition-all">
                    Download as PDF
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">

        <!-- Top KPI Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
            <!-- KPI Card: YTD PBIT -->
            <div class="bg-white p-6 rounded-lg shadow-lg transition-all hover:shadow-xl">
                <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wider">YTD Net Profit (PBIT)</h3>
                <p class="text-4xl font-bold text-ave-teal-dark mt-2">£568,000</p>
            </div>
            
            <!-- KPI Card: PBIT vs Forecast -->
            <div class="bg-white p-6 rounded-lg shadow-lg transition-all hover:shadow-xl">
                <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wider">PBIT vs. Forecast (YTD)</h3>
                <p class="text-4xl font-bold text-green-600 mt-2">+£17,000</p>
                <span class="text-sm text-green-600">Beating forecast</span>
            </div>

            <!-- KPI Card: Procurement Mitigation -->
            <div class="bg-white p-6 rounded-lg shadow-lg transition-all hover:shadow-xl">
                <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Procurement Price Mitigation</h3>
                <p class="text-4xl font-bold text-ave-orange mt-2">£188,000</p>
                <span class="text-sm text-gray-600">Value mitigated in Sept</span>
            </div>
            
            <!-- KPI Card: Pipeline Value -->
            <div class="bg-white p-6 rounded-lg shadow-lg transition-all hover:shadow-xl">
                <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Total Pipeline Value</h3>
                <p class="text-4xl font-bold text-ave-teal-dark mt-2">£19 Million</p>
                <span class="text-sm text-gray-600">from 83 opportunities</span>
            </div>
        </div>
        <!-- End Top KPI Row -->

        <!-- Main Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Card: Commercial Performance (Main) -->
            <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-4 text-ave-teal-dark">Commercial Performance</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Metric</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">September</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Forecast (Sep)</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Variance (Sep)</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">YTD</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Variance (YTD)</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-4 whitespace-nowrap font-medium text-gray-900">Revenue</td>
                                <td class="px-4 py-4 whitespace-nowrap text-gray-700">£199k</td>
                                <td class="px-4 py-4 whitespace-nowrap text-gray-700">£229k</td>
                                <td class="px-4 py-4 whitespace-nowrap font-semibold text-red-600">-£30k</td>
                                <td class="px-4 py-4 whitespace-nowrap text-gray-700">£2.22m</td>
                                <td class="px-4 py-4 whitespace-nowrap font-semibold text-red-600">-£30k</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-4 whitespace-nowrap font-medium text-gray-900">Overheads</td>
                                <td class="px-4 py-4 whitespace-nowrap text-gray-700">-£13k</td>
                                <td class="px-4 py-4 whitespace-nowrap text-gray-700">£11k</td>
                                <td class="px-4 py-4 whitespace-nowrap font-semibold text-green-600">+£24k*</td>
                                <td class="px-4 py-4 whitespace-nowrap text-gray-700">£1.64m</td>
                                <td class="px-4 py-4 whitespace-nowrap font-semibold text-green-600">+£47k*</td>
                            </tr>
                            <tr class="bg-gray-50">
                                <td class="px-4 py-4 whitespace-nowrap font-bold text-gray-900">Net Profit (PBIT)</td>
                                <td class="px-4 py-4 whitespace-nowrap font-bold text-gray-900">£109k</td>
                                <td class="px-4 py-4 whitespace-nowrap font-bold text-gray-900">£116k</td>
                                <td class="px-4 py-4 whitespace-nowrap font-bold text-red-600">-£7k</td>
                                <td class="px-4 py-4 whitespace-nowrap font-bold text-gray-900">£568k</td>
                                <td class="px-4 py-4 whitespace-nowrap font-bold text-green-600">+£17k</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="text-xs text-gray-500 mt-3">*Positive overhead variance indicates an underspend (favourable).</p>
            </div>

            <!-- Card: Business Development -->
            <div class="bg-white p-6 rounded-lg shadow-lg h-full">
                <h3 class="text-xl font-semibold mb-4 text-ave-teal-dark">Business Development</h3>
                <ul class="space-y-3">
                    <li class="flex justify-between items-center py-2 border-b">
                        <span class="text-gray-600">Pipeline Value</span>
                        <span class="font-bold text-ave-teal text-lg">£19M (83 Opps)</span>
                    </li>
                    <li class="flex justify-between items-center py-2 border-b">
                        <span class="text-gray-600">Total Income Opportunity</span>
                        <span class="font-bold text-gray-800 text-lg">£1.18M</span>
                    </li>
                    <li class="flex justify-between items-center py-2 border-b">
                        <span class="text-gray-600">Probable Income (@20%)</span>
                        <span class="font-bold text-gray-800 text-lg">£236k</span>
                    </li>
                    <li class="flex justify-between items-center py-2 border-b">
                        <span class="text-gray-600">Avg. Income per Opp.</span>
                        <span class="font-bold text-gray-800 text-lg">£14.2k</span>
                    </li>
                    <li class="flex justify-between items-center py-2">
                        <span class="text-gray-600">Quotes Converted YTD</span>
                        <span class="font-bold text-gray-800 text-lg">21 (£102.5k)</span>
                    </li>
                </ul>
            </div>

            <!-- Card: Pipeline Sector Focus (Chart) -->
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-2 text-ave-teal-dark">Pipeline Sector Focus</h3>
                <p class="text-sm text-gray-500 mb-4">(% of Pipeline Value)</p>
                <div class="w-full h-64">
                    <canvas id="pipelineChart"></canvas>
                </div>
            </div>

            <!-- Card: Income by Sector (Chart) -->
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-2 text-ave-teal-dark">Income by Sector</h3>
                <p class="text-sm text-gray-500 mb-4">(Average Income %)</p>
                <div class="w-full h-64">
                    <canvas id="incomeChart"></canvas>
                </div>
            </div>

            <!-- Card: Client Order Split (Chart) -->
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-2 text-ave-teal-dark">Client Order Split (Sept)</h3>
                <p class="text-sm text-gray-500 mb-4">Note: Shows percentage of total orders for clients listed in report.</p>
                <div class="w-full h-64">
                    <canvas id="clientOrderChart"></canvas>
                </div>
            </div>

            <!-- Card: Client SLA Compliance (The "Ticketing Box") -->
            <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-lg h-full">
                <h3 class="text-xl font-semibold mb-4 text-ave-teal-dark">Client Ticketing SLA (3-Day)</h3>
                <ul class="space-y-4">
                    <!-- Aspens Services Ltd -->
                    <li class="border-b pb-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-700">Aspens Services Ltd</span>
                            <span class="font-bold text-green-600">97.26%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="bg-green-600 h-2.5 rounded-full" style="width: 97.26%"></div>
                        </div>
                         <span class="text-xs text-gray-500">782 of 804 Tickets</span>
                    </li>
                    <!-- Miquill Catering Ltd -->
                    <li class="border-b pb-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-700">Miquill Catering Ltd</span>
                            <span class="font-bold text-yellow-500">94.55%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="bg-yellow-500 h-2.5 rounded-full" style="width: 94.55%"></div>
                        </div>
                         <span class="text-xs text-gray-500">52 of 55 Tickets</span>
                    </li>
                    <!-- Stir Food Ltd -->
                    <li class="border-b pb-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-700">Stir Food Ltd</span>
                            <span class="font-bold text-yellow-500">94.23%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="bg-yellow-500 h-2.5 rounded-full" style="width: 94.23%"></div>
                        </div>
                         <span class="text-xs text-gray-500">50 of 53 Tickets</span>
                    </li>
                     <!-- Palmer & Howells Ltd -->
                    <li>
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-medium text-gray-700">Palmer & Howells Ltd</span>
                            <span class="font-bold text-green-600">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="bg-green-600 h-2.5 rounded-full" style="width: 100%"></div>
                        </div>
                         <span class="text-xs text-gray-500">27 of 27 Tickets</span>
                    </li>
                </ul>
            </div>

            <!-- Card: Food & Nutrition -->
            <div class="bg-white p-6 rounded-lg shadow-lg h-full">
                <h3 class="text-xl font-semibold mb-4 text-ave-teal-dark">Bespoke Menu Performance</h3>
                <ul class="space-y-3">
                    <li class="flex justify-between items-center py-2 border-b">
                        <span class="text-gray-600">SLA (% within 10 Days)</span>
                        <span class="font-bold text-green-600 text-lg">90%</span>
                    </li>
                    <li class="flex justify-between items-center py-2 border-b">
                        <span class="text-gray-600">Avg. Turnaround</span>
                        <span class="font-bold text-gray-800 text-lg">7 Days</span>
                    </li>
                    <li class="flex justify-between items-center py-2 border-b">
                        <span class="text-gray-600">Completed Menus</span>
                        <span class="font-bold text-gray-800 text-lg">46</span>
                    </li>
                    <li class="flex justify-between items-center py-2 border-b">
                        <span class="text-gray-600">Validated Requests</span>
                        <span class="font-bold text-gray-800 text-lg">51</span>
                    </li>
                    <li class="flex justify-between items-center py-2">
                        <span class="text-gray-600">Total Requests</span>
                        <span class="font-bold text-gray-800 text-lg">169</span>
                    </li>
                </ul>
            </div>

        </div>
        <!-- End Main Dashboard Grid -->

    </div>

    <!-- Chart.js Initialization -->
    <script>
        window.onload = function() {
            // Check if Chart object exists, if not, wait for it.
            if (typeof Chart === 'undefined') {
                setTimeout(initCharts, 100); // Wait 100ms and try again
                return;
            }
            initCharts();
        };

        function initCharts() {
             // Ensure Chart.js is loaded
            if (typeof Chart === 'undefined') {
                console.error('Chart.js failed to load.');
                return;
            }
            
            // Register Chart.js components - REMOVED faulty line
            // Chart.register(...Chart.controllers, ...Chart.elements, ...Chart.scales, ...Chart.plugins);
            // The full build from CDN auto-registers standard components.

            const chartColors = {
                teal: '#0d9488',
                orange: '#f97316',
                lightTeal: '#99f6e4',
                gray: '#6b7280'
            };

            // --- Pipeline Chart ---
            const pipelineCtx = document.getElementById('pipelineChart');
            if (pipelineCtx) {
                new Chart(pipelineCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Hospitality', 'Healthcare', 'Education'],
                        datasets: [{
                            data: [49, 43, 8],
                            backgroundColor: [chartColors.teal, chartColors.orange, chartColors.lightTeal],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: { font: { family: "'Inter', sans-serif", size: 12 } }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.raw}%`;
                                    }
                                }
                            }
                        }
                    }
                });
            } else {
                console.log('pipelineChart canvas not found');
            }

            // --- Income Chart ---
            const incomeCtx = document.getElementById('incomeChart');
            if (incomeCtx) {
                new Chart(incomeCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Hospitality', 'Healthcare', 'Education'],
                        datasets: [{
                            data: [47, 35, 18],
                            backgroundColor: [chartColors.teal, chartColors.orange, chartColors.lightTeal],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: { font: { family: "'Inter', sans-serif", size: 12 } }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.raw}%`;
                                    }
                                }
                            }
                        }
                    }
                });
            } else {
                console.log('incomeChart canvas not found');
            }

            // --- Client Order Chart ---
            const clientOrderCtx = document.getElementById('clientOrderChart');
            if (clientOrderCtx) {
                new Chart(clientOrderCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Stir Food', 'Palmer & Howells', 'Miquill Catering', 'Aspen Services'],
                        datasets: [{
                            label: '% of Total Orders',
                            data: [9.16, 8.16, 6.03, 2.70],
                            backgroundColor: chartColors.teal,
                            borderRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y', // Make it a horizontal bar chart
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 12, // Give it some breathing room
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            },
                            y: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            } else {
                console.log('clientOrderChart canvas not found');
            }
        };
    </script>

</body>
</html>







